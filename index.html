<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>云畔网*炉石传说</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- 样式文件 -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/animations.css">

    <!-- 配置和常量 -->
    <script src="js/config.js"></script>
    <script src="js/constants.js"></script>

    <!-- 核心类文件 -->
    <script src="js/classes/Card.js"></script>
    <script src="js/classes/Minion.js"></script>
    <script src="js/classes/Weapon.js"></script>
    <script src="js/classes/Spell.js"></script>
    <script src="js/classes/Player.js"></script>

    <!-- 工具类和处理器 -->
    <script src="js/utils/GameUtils.js"></script>
    <script src="js/handlers/HeroSkillHandlers.js"></script>
    <script src="js/AI.js"></script>

    <!-- 游戏主类（分多个部分） -->
    <script src="js/HearthstoneGame.js"></script>
    <script src="js/HearthstoneGame-Part2.js"></script>
    <script src="js/HearthstoneGame-Part3.js"></script>
    <script src="js/HearthstoneGame-Part4.js"></script>

    <!-- 主入口文件 -->
    <script src="js/main.js"></script>
</head>

<body class="bg-primary font-game text-white min-h-screen overflow-x-hidden">
    <header class="bg-gradient-to-r from-primary to-primary/80 py-2 px-4 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-fire text-secondary text-2xl"></i>
                <h1 class="text-[clamp(1.2rem,2vw,2rem)] font-bold text-white text-shadow">炉石传说</h1>
            </div>
            <div class="flex space-x-2">
                <button id="new-game"
                    class="bg-green-600 hover:bg-green-700 text-white font-bold py-1.5 px-3 rounded-lg transition-all duration-300 flex items-center text-sm">
                    <i class="fa fa-plus mr-1"></i> 新游戏
                </button>
                <button id="restart-game"
                    class="bg-secondary hover:bg-secondary/80 text-primary font-bold py-1.5 px-3 rounded-lg transition-all duration-300 flex items-center text-sm">
                    <i class="fa fa-refresh mr-1"></i> 重新开始
                </button>
                <button id="card-library"
                    class="bg-white/10 hover:bg-white/20 text-white font-bold py-1.5 px-3 rounded-lg transition-all duration-300 flex items-center text-sm">
                    <i class="fa fa-clone mr-1"></i> 卡牌库
                </button>
                <button id="help"
                    class="bg-white/10 hover:bg-white/20 text-white font-bold py-1.5 px-3 rounded-lg transition-all duration-300 text-sm">
                    <i class="fa fa-question"></i>
                </button>
            </div>
        </div>
    </header>

    <div id="game-status" class="bg-black/50 py-1 px-2 text-center text-base">
    </div>

    <main class="container mx-auto px-2 py-3 flex gap-3">
        <aside class="w-[280px]">
            <div class="bg-gradient-to-br from-black/70 to-primary/80 rounded-xl p-3 h-full min-h-[400px] max-h-[calc(100vh-60px)] overflow-y-auto text-base shadow-xl border border-secondary"
                id="game-log" style="font-size: 1rem; line-height: 1.5; max-height: calc(80vh - 60px);">
                <p class="text-gray-300">游戏日志将显示在这里...</p>
            </div>
        </aside>

        <section class="flex-[2.2] border-l border-white/20 pl-5">
            <!-- 对手手牌区 -->
            <div id="enemy-hand" class="flex flex-wrap gap-2 min-h-[90px] justify-center mb-2">
                <div class="text-center text-gray-400 w-full py-3">无手牌</div>
            </div>

            <!-- 对手英雄区（只保留头像、技能按钮、血量、护甲） -->
            <div class="enemy-hero-area flex items-center mb-2 gap-3 justify-center">
                <div class="flex flex-col items-center">
                    <div
                        class="enemy-hero-avatar bg-enemy rounded-full border-2 border-secondary w-20 h-20 flex items-center justify-center shadow-lg relative mx-auto">
                        <i class="fa fa-user-secret text-4xl"></i>
                    </div>
                </div>
                <div class="flex flex-row items-center gap-3 ml-2">
                    <button id="enemy-hero-power"
                        class="bg-green-700 hover:bg-green-800 text-white font-bold w-10 h-10 rounded-full shadow flex items-center justify-center text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                        disabled title="猎人技能：2法力，对方英雄2伤害">
                        <i class="fa fa-crosshairs"></i>
                    </button>
                    <div class="flex items-center gap-2 text-lg font-bold">
                        <i class="fa fa-heart text-red-500 mr-1"></i>
                        <span id="enemy-health">30</span>
                        <span id="enemy-armor" class="ml-2 flex items-center gap-1 text-base"><i
                                class="fa fa-shield text-blue-400"></i><span>0</span></span>
                    </div>
                </div>
            </div>

            <!-- 对手随从区 -->
            <div id="enemy-minions" class="flex flex-wrap gap-2 min-h-[85px] justify-center">
                <div class="text-center text-gray-400 w-full py-2">无随从</div>
            </div>

            <!-- 中间分割线 -->
            <div class="w-full flex items-center justify-center my-2">
                <div
                    class="h-1 w-2/3 bg-gradient-to-r from-transparent via-secondary to-transparent rounded-full opacity-60">
                </div>
            </div>

            <!-- 回合结束按钮 -->
            <!-- 回合结束按钮已移至右侧信息栏 -->

            <!-- 玩家随从区 -->
            <div id="player-minions" class="flex flex-wrap gap-2 min-h-[85px] justify-center mb-3 mt-2">
                <div class="text-center text-gray-400 w-full py-2">无随从</div>
            </div>

            <!-- 玩家英雄区（只保留头像、技能按钮、血量、护甲） -->
            <div class="player-hero-area flex items-center mt-4 gap-3 justify-center">
                <div class="flex flex-col items-center">
                    <div
                        class="player-hero-avatar bg-player rounded-full border-2 border-secondary w-20 h-20 flex items-center justify-center shadow-lg relative mx-auto">
                        <i class="fa fa-user text-4xl"></i>
                    </div>
                </div>
                <div class="flex flex-row items-center gap-3 ml-2">
                    <button id="player-hero-power"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold w-10 h-10 rounded-full shadow flex items-center justify-center text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                        disabled title="法师技能：2法力，指定目标1伤害">
                        <i class="fa fa-magic"></i>
                    </button>
                    <div class="flex items-center gap-2 text-lg font-bold">
                        <i class="fa fa-heart text-red-500 mr-1"></i>
                        <span id="player-health">30</span>
                        <span id="player-armor" class="ml-2 flex items-center gap-1 text-base"><i
                                class="fa fa-shield text-blue-400"></i><span>0</span></span>
                    </div>
                </div>
            </div>

            <!-- 玩家手牌区 -->
            <div id="player-hand" class="flex flex-wrap gap-2 min-h-[90px] justify-center mt-2">
                <div class="text-center text-gray-400 w-full py-3">无手牌</div>
            </div>
        </section>

        <!-- 右侧信息栏：上下对齐，玩家信息靠下 -->
        <aside class="info-panel border-l border-white/20 pl-3 flex flex-col justify-between" style="height: 100%;">
            <!-- 顶部对手信息 -->
            <div class="flex flex-col gap-2 mt-8">
                <div class="flex items-center gap-2 text-base font-bold">
                    <i class="fa fa-gavel text-yellow-400"></i>
                    <span id="enemy-attack">0</span>
                </div>
                <div class="flex items-center gap-2 text-base font-bold">
                    <i class="fa fa-bolt text-yellow-400"></i>
                    <span id="enemy-mana">0</span>/<span id="enemy-max-mana">0</span>
                </div>
                <div class="flex flex-col gap-1 text-xs opacity-80 mt-2">
                    <span>抽牌堆:<span id="enemy-deck-count">10</span></span>
                    <span>疲劳值:<span id="enemy-fatigue">0</span></span>
                    <span>弃牌堆:<span id="enemy-graveyard-count">0</span></span>
                </div>
            </div>
            <!-- 中间居中结束回合按钮 -->
            <div class="w-full flex items-center justify-center my-24">
                <button id="end-turn"
                    class="bg-secondary hover:bg-secondary/80 text-primary font-bold py-2 px-5 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-secondary text-base shadow-lg w-2/3 min-w-[150px]"
                    disabled>
                    结束回合 <i class="fa fa-arrow-right ml-1"></i>
                </button>
            </div>
            <!-- 底部玩家信息 -->
            <div class="flex flex-col gap-2 mb-50">
                <div class="flex items-center gap-2 text-base font-bold">
                    <i class="fa fa-gavel text-yellow-400"></i>
                    <span id="player-attack">0</span>
                </div>
                <div class="flex items-center gap-2 text-base font-bold">
                    <i class="fa fa-bolt text-yellow-400"></i>
                    <span id="player-mana">0</span>/<span id="player-max-mana">0</span>
                </div>
                <div class="flex flex-col gap-1 text-xs opacity-80 mt-2">
                    <span>抽牌堆:<span id="player-deck-count">10</span></span>
                    <span>疲劳值:<span id="player-fatigue">0</span></span>
                    <span>弃牌堆:<span id="player-graveyard-count">0</span></span>
                </div>
            </div>
        </aside>
        </section>
    </main>

    <!-- 游戏模式选择弹窗 -->
    <div id="game-mode-modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50">
        <div class="bg-primary border-2 border-secondary rounded-xl p-6 max-w-md w-full mx-2 text-center">
            <h3 class="text-3xl font-bold mb-4 text-secondary">
                <i class="fa fa-fire mr-2"></i>云畔网*炉石传说
            </h3>
            <p class="text-lg mb-6 text-gray-300">选择游戏模式开始战斗！</p>
            <div class="space-y-4">
                <button id="practice-mode"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-lg transition-all duration-300 text-lg flex items-center justify-center">
                    <i class="fa fa-graduation-cap mr-3"></i>
                    <div class="text-left">
                        <div>练习模式</div>
                        <div class="text-sm opacity-80">自由操控双人对战！</div>
                    </div>
                </button>
                <button id="vs-ai-mode"
                    class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-lg transition-all duration-300 text-lg flex items-center justify-center">
                    <i class="fa fa-user mr-3"></i>
                    <div class="text-left">
                        <div>冒险模式</div>
                        <div class="text-sm opacity-80">使用随机职业对战AI！</div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- 职业选择弹窗 -->
    <div id="choose-class-modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
        <div class="bg-primary border-2 border-secondary rounded-xl p-4 max-w-lg w-full mx-2 text-center">
            <h3 class="text-2xl font-bold mb-2">选择职业</h3>
            <div id="class-select-step" class="mb-2 text-lg">请选择你的职业：</div>
            <div id="class-list" class="grid grid-cols-3 gap-4 mb-4">
            </div>
            <button id="confirm-class"
                class="bg-secondary hover:bg-secondary/80 text-primary font-bold py-2 px-5 rounded-lg transition-all duration-300 text-base mt-2 hidden">
                确认
            </button>
        </div>
    </div>

    <!-- 帮助弹窗 -->
    <div id="help-modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
        <div class="bg-primary border-2 border-secondary rounded-xl p-4 max-w-md w-full mx-2">
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-xl font-bold">游戏帮助</h3>
                <button id="close-help" class="text-white hover:text-secondary text-xl">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            <div class="space-y-2 text-gray-200 text-sm">
                <div>
                    <h4 class="text-xl font-semibold text-secondary mb-2">基本规则</h4>
                    <p>这是一款【云畔网】自制炉石传说同人游戏，双方玩家轮流回合，使对方生命值降为0获胜。</p>
                </div>
                <div>
                    <h4 class="text-xl font-semibold text-secondary mb-2">操作方法</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li>点击手牌中的随从牌可以召唤到场上（需要消耗相应的法力值）</li>
                        <li>点击自己的随从，然后点击目标进行攻击</li>
                        <li>完成操作后点击"结束回合"按钮</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-semibold text-secondary mb-2">特殊效果</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><span class="text-blue-400">嘲讽</span> - 敌人必须攻击该随从</li>
                        <li><span class="text-green-400">冲锋</span> - 可以立即发起攻击</li>
                        <li><span class="text-orange-400">突袭</span> - 可以立即攻击随从</li>
                        <li><span class="text-cyan-300">风怒</span> - 每个回合可以攻击两次</li>
                        <li><span class="text-yellow-300">圣盾</span> - 无视本角色受到的第一次伤害</li>
                        <li><span class="text-purple-400">潜行</span> - 无法被攻击或被指定为目标，直到其开始攻击为止</li>
                        <li><span class="text-green-500">剧毒</span> - 消灭任何受到其伤害的随从</li>
                        <li><span class="text-red-400">吸血</span> - 造成的伤害可以为其英雄恢复等量的生命值</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 游戏结束弹窗 -->
    <div id="game-over-modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
        <div class="bg-primary border-2 border-secondary rounded-xl p-4 max-w-sm w-full mx-2 text-center">
            <h3 id="game-over-title" class="text-2xl font-bold mb-2">游戏结束</h3>
            <p id="game-over-message" class="text-lg mb-3">你赢了！</p>
            <button id="play-again"
                class="bg-secondary hover:bg-secondary/80 text-primary font-bold py-2 px-5 rounded-lg transition-all duration-300 text-base">
                再玩一次 <i class="fa fa-refresh ml-1"></i>
            </button>
        </div>
    </div>

    <!-- 冒险模式选项弹窗 -->
    <div id="adventure-mode-modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
        <div class="bg-primary border-2 border-secondary rounded-xl p-6 max-w-md w-full mx-2 text-center">
            <h3 class="text-3xl font-bold mb-4 text-secondary">
                <i class="fa fa-magic mr-2"></i>选择战斗模式
            </h3>
            <p class="text-lg mb-6 text-gray-300">选择一种特殊的战斗规则！</p>
            <div class="space-y-3">
                <button id="random-cards-mode"
                    class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 text-base flex items-center justify-center">
                    <i class="fa fa-random mr-2"></i>
                    <div class="text-left">
                        <div>随机卡牌战斗</div>
                        <div class="text-xs opacity-80">使用所有随机卡牌战斗</div>
                    </div>
                </button>
                <button id="charge-mode"
                    class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 text-base flex items-center justify-center">
                    <i class="fa fa-bolt mr-2"></i>
                    <div class="text-left">
                        <div>冲锋随从战斗</div>
                        <div class="text-xs opacity-80">双方都使用冲锋随从战斗</div>
                    </div>
                </button>
                <button id="rush-mode"
                    class="w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 text-base flex items-center justify-center">
                    <i class="fa fa-flash mr-2"></i>
                    <div class="text-left">
                        <div>突袭随从战斗</div>
                        <div class="text-xs opacity-80">双方都使用突袭随从战斗</div>
                    </div>
                </button>
                <button id="taunt-mode"
                    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 text-base flex items-center justify-center">
                    <i class="fa fa-shield mr-2"></i>
                    <div class="text-left">
                        <div>嘲讽随从战斗</div>
                        <div class="text-xs opacity-80">双方都使用嘲讽随从战斗</div>
                    </div>
                </button>
                <button id="lifesteal-mode"
                    class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 text-base flex items-center justify-center">
                    <i class="fa fa-heart mr-2"></i>
                    <div class="text-left">
                        <div>吸血随从战斗</div>
                        <div class="text-xs opacity-80">双方都使用吸血随从战斗</div>
                    </div>
                </button>
                <button id="windfury-mode"
                    class="w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 text-base flex items-center justify-center">
                    <i class="fa fa-refresh mr-2"></i>
                    <div class="text-left">
                        <div>风怒随从战斗</div>
                        <div class="text-xs opacity-80">双方都使用风怒随从战斗</div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- 卡牌库弹窗 -->
    <div id="card-library-modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
        <div class="bg-primary border-2 border-secondary rounded-xl p-6 max-w-[1200px] w-full mx-2"
            style="height:680px;">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold">卡牌库</h3>
                <button id="close-card-library" class="text-white hover:text-secondary text-2xl">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            <div class="flex items-center justify-between mb-4">
                <button id="card-lib-prev"
                    class="text-secondary hover:text-white text-3xl px-3 py-2 rounded transition-all duration-200">
                    <i class="fa fa-chevron-left"></i>
                </button>
                <span id="card-lib-page-info" class="text-lg text-gray-300"></span>
                <button id="card-lib-next"
                    class="text-secondary hover:text-white text-3xl px-3 py-2 rounded transition-all duration-200">
                    <i class="fa fa-chevron-right"></i>
                </button>
            </div>
            <div id="card-library-list" class="grid grid-cols-4 gap-x-8 gap-y-6 mb-2">
                <!-- 卡牌内容由JS生成 -->
            </div>
        </div>
    </div>
</body>

</html>